---
import Base from "@layouts/Base.astro";
import { getAllCategories, url } from "@lib/data";

const categories = getAllCategories();
const totalEntries = categories.reduce((sum, c) => sum + c.entryCount, 0);
---

<Base title="Home">
  <h1 class="text-3xl font-bold mb-2">Old World Encyclopedia</h1>
  <p class="text-stone-600 mb-8">
    {categories.length} categories, {totalEntries.toLocaleString()} entries
  </p>
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
    {
      categories.map((cat) => (
        <a
          href={url(`/${cat.name}/`)}
          class="block rounded-lg border border-stone-200 bg-white p-4 shadow-sm hover:shadow-md hover:border-stone-300 transition-shadow"
        >
          <h2 class="font-semibold text-lg">{cat.displayName}</h2>
          <p class="text-sm text-stone-500 mt-1">
            {cat.entryCount} {cat.entryCount === 1 ? "entry" : "entries"}
          </p>
        </a>
      ))
    }
  </div>
</Base>
